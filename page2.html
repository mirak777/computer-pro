<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Shatakshi Computer üñ•Ô∏è - Jhiljhile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

    <style>
        :root {
            --bg-body: #f0f2f5;
            --primary: #1a73e8; /* Tech Blue */
            --accent: #00c853; /* Success Green */
            --dark: #202124;
            --white: #ffffff;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
            --shadow-md: 0 8px 24px rgba(0,0,0,0.12);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
        body { background-color: var(--bg-body); color: var(--dark); padding-bottom: 110px; overflow-x: hidden; }

        /* HEADER */
        header {
            padding: 15px 20px; display: flex; align-items: center; justify-content: space-between;
            position: sticky; top: 0; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px);
            z-index: 1000; border-bottom: 1px solid rgba(0,0,0,0.08);
        }
        .logo { font-size: 18px; font-weight: 800; color: var(--primary); letter-spacing: -0.5px; }

        /* MOBILE OPTIMIZATION OVERRIDE CLASS */
        body.mobile-optimized .product-grid {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 12px;
        }
        body.mobile-optimized .img-box { height: 120px !important; }
        body.mobile-optimized .card h3 { font-size: 14px !important; height: auto !important; -webkit-line-clamp: 1 !important; }
        body.mobile-optimized .price-text { font-size: 16px !important; }

        /* SEARCH */
        .search-container { padding: 12px 15px; background: var(--white); }
        .search-box { 
            background: #f1f3f4; border-radius: 12px; padding: 10px 15px; 
            display: flex; align-items: center; transition: 0.3s;
        }
        .search-box input { border: none; background: transparent; width: 100%; margin-left: 10px; font-size: 15px; outline: none; }

        /* 4 PRODUCT COLUMN GRID (ORIGINAL) */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 8px; 
            padding: 10px; 
        }

        .card { 
            background: var(--white); border-radius: 12px; padding: 8px; 
            box-shadow: var(--shadow-sm); display: flex; flex-direction: column;
            justify-content: space-between; border: 1px solid rgba(0,0,0,0.03);
        }

        .img-box { 
            width: 100%; height: 70px; 
            background: #fafafa; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; margin-bottom: 5px;
        }
        .img-box img { max-width: 90%; max-height: 90%; object-fit: contain; }
        
        .card h3 { 
            font-size: 10px; 
            font-weight: 600; line-height: 1.2; height: 24px; 
            overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
        }
        .price-text { font-size: 11px; font-weight: 800; color: var(--accent); margin: 4px 0; }

        .card-actions { display: flex; flex-direction: column; gap: 4px; }
        .btn-add-cart { background: #e8f0fe; color: var(--primary); border: none; padding: 5px; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .btn-buy-now { background: var(--dark); color: white; border: none; padding: 5px; border-radius: 6px; font-size: 10px; font-weight: 700; cursor: pointer; }

        /* BANNER */
        .featured-slider { display: flex; overflow-x: auto; gap: 10px; padding: 15px; scrollbar-width: none; }
        .slide-card { min-width: 80%; height: 120px; border-radius: 15px; padding: 20px; color: white; position: relative; flex-shrink: 0; }
        
        /* CATEGORY PILLS */
        .category-bar { display: flex; overflow-x: auto; padding: 10px; gap: 8px; scrollbar-width: none; }
        .pill { 
            background: var(--white); padding: 8px 15px; border-radius: 20px; 
            font-size: 12px; font-weight: 600; white-space: nowrap; border: 1px solid #ddd;
        }
        .pill.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* NAVIGATION & UI */
        .bottom-nav { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 70px; 
            background: var(--white); display: flex; justify-content: space-around; 
            align-items: center; border-top: 1px solid #eee; z-index: 1000;
        }
        .nav-item { color: #5f6368; text-align: center; font-size: 10px; text-decoration: none; }
        .nav-item i { display: block; font-size: 20px; margin-bottom: 3px; }
        .nav-item.active { color: var(--primary); }

        #cartDrawer { position: fixed; bottom: -100%; left: 0; width: 100%; height: 70%; background: white; z-index: 4000; transition: 0.4s; padding: 20px; border-radius: 25px 25px 0 0; box-shadow: 0 -10px 30px rgba(0,0,0,0.1); }
        #cartDrawer.open { bottom: 0; }
        .full-modal { position: fixed; inset: 0; background: white; z-index: 6000; display: none; padding: 20px; overflow-y: auto; }
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 2000; display: none; }
        
        /* UI TOGGLE BUTTON */
        .toggle-ui {
            background: #f1f3f4; border: none; padding: 5px 10px; border-radius: 8px;
            font-size: 11px; font-weight: bold; cursor: pointer; color: var(--primary);
        }
    </style>
</head>
<body onload="initApp()">

    <header>
        <div class="logo" onclick="location.reload()">SHATAKSHI COMPUTER</div>
        <div style="display:flex; gap:12px; align-items:center;">
            <button class="toggle-ui" id="viewModeBtn" onclick="toggleViewMode()">
                <i class="fas fa-mobile-alt"></i> Mobile UI
            </button>
            
            <div style="position:relative;" onclick="toggleCart()">
                <i class="fas fa-shopping-basket" style="font-size:20px;"></i>
                <span id="cartCountBadge" style="position:absolute; top:-8px; right:-8px; background:red; color:white; font-size:9px; padding:2px 5px; border-radius:50%; display:none;">0</span>
            </div>
            <i class="fas fa-bars" onclick="toggleDropdown(event)"></i>
        </div>
        <div id="headerDropdown" style="position:absolute; top:60px; right:20px; background:white; box-shadow:var(--shadow-md); border-radius:8px; display:none; flex-direction:column; z-index:5000;">
            <div style="padding:12px 20px; font-size:14px; border-bottom:1px solid #eee;" onclick="openAbout()">About Store</div>
            <div style="padding:12px 20px; font-size:14px;" onclick="login()">Admin Login</div>
        </div>
    </header>

    <div class="search-container">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Search products..." onkeyup="filterProducts()">
        </div>
    </div>

    <div class="featured-slider">
        <div class="slide-card" style="background:#1a73e8;"><h3>CCTV Systems</h3><p>Full HD Security</p></div>
        <div class="slide-card" style="background:#34a853;"><h3>Fast Repairs</h3><p>Printers & Laptops</p></div>
    </div>

    <div class="category-bar">
        <div class="pill active" onclick="setCategoryFilter('All Products', this)">All</div>
        <div class="pill" onclick="setCategoryFilter('CCTV Camera', this)">CCTV</div>
        <div class="pill" onclick="setCategoryFilter('Laptops', this)">Laptops</div>
        <div class="pill" onclick="setCategoryFilter('Printers', this)">Printers</div>
    </div>

    <div class="product-grid" id="productGrid"></div>

    <div id="cartDrawer">
        <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom:15px;">
            <h3>Cart</h3>
            <button onclick="toggleCart()" style="border:none; padding:5px 10px;">Close</button>
        </div>
        <div id="cartItemsList"></div>
        <div style="margin-top:20px; padding:15px; background:#f8f9fa; border-radius:10px;">
            <div style="display:flex; justify-content:space-between; font-weight:bold;">
                <span>Total:</span><span id="cartTotal">Rs 0</span>
            </div>
            <button onclick="checkoutWhatsApp()" style="width:100%; background:#25d366; color:white; border:none; padding:12px; margin-top:10px; border-radius:8px;">Order via WhatsApp</button>
        </div>
    </div>

    <div id="aboutModal" class="full-modal">
        <button onclick="closeModal('aboutModal')" style="padding:10px; margin-bottom:20px;">‚Üê Back</button>
        <div id="storeStatus"></div>
        <div style="margin-top:20px;">
            <p><strong>Owner:</strong> Kamal Bhandari</p>
            <p><strong>Phone:</strong> 9816910549</p>
            <p><strong>Location:</strong> Jhiljhile, Jhapa</p>
        </div>
    </div>

    <div id="productModal" class="full-modal">
        <button onclick="closeModal('productModal')" style="padding:10px; margin-bottom:20px;">‚Üê Back</button>
        <div id="modalBody"></div>
    </div>

    <div class="overlay" id="overlay" onclick="closeAll()"></div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="location.reload()"><i class="fas fa-home"></i>Home</div>
        <div class="nav-item" onclick="window.open('tel:9816910549')"><i class="fas fa-phone"></i>Call</div>
        <div class="nav-item" onclick="toggleCart()"><i class="fas fa-shopping-cart"></i>Cart</div>
        <div class="nav-item" onclick="openAbout()"><i class="fas fa-info-circle"></i>Info</div>
    </nav>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCL-OgHfVUD8IsTSEnunqL6bfs6TKg9W5s",
            authDomain: "liga2-3dc2f.firebaseapp.com",
            databaseURL: "https://liga2-3dc2f-default-rtdb.firebaseio.com",
            projectId: "liga2-3dc2f",
            storageBucket: "liga2-3dc2f.firebasestorage.app",
            messagingSenderId: "588466896158",
            appId: "1:588466896158:web:78a107297e68276f575608"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();

        let allProducts = {};
        let cart = [];
        let activeCategory = 'All Products';

        function initApp() {
            updateStatus();
            db.ref('products').on('value', snap => {
                allProducts = snap.val() || {};
                filterProducts();
            });
            // Check for saved preference
            if(localStorage.getItem('mobileUI') === 'true') {
                document.body.classList.add('mobile-optimized');
                document.getElementById('viewModeBtn').innerHTML = '<i class="fas fa-desktop"></i> Desktop UI';
            }
        }

        function toggleViewMode() {
            const isOptimized = document.body.classList.toggle('mobile-optimized');
            const btn = document.getElementById('viewModeBtn');
            localStorage.setItem('mobileUI', isOptimized);
            btn.innerHTML = isOptimized ? '<i class="fas fa-desktop"></i> Desktop UI' : '<i class="fas fa-mobile-alt"></i> Mobile UI';
        }

        function updateStatus() {
            const h = new Date().getHours();
            const status = document.getElementById('storeStatus');
            status.innerHTML = (h >= 9 && h < 19) ? '<b style="color:green;">Open Now</b>' : '<b style="color:red;">Closed Now</b>';
        }

        function filterProducts() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('productGrid');
            grid.innerHTML = "";
            Object.keys(allProducts).reverse().forEach(id => {
                const p = allProducts[id];
                if((activeCategory === 'All Products' || p.category === activeCategory) && (p.name.toLowerCase().includes(q))) {
                    grid.insertAdjacentHTML('beforeend', `
                        <div class="card">
                            <div class="img-box" onclick="viewDetails('${id}')"><img src="${p.img}"></div>
                            <h3>${p.name}</h3>
                            <p class="price-text">Rs ${p.price}</p>
                            <div class="card-actions">
                                <button class="btn-add-cart" onclick="addToCart('${id}')"><i class="fas fa-plus"></i></button>
                                <button class="btn-buy-now" onclick="whatsappMe('${p.name}', '${p.price}')">Order</button>
                            </div>
                        </div>`);
                }
            });
        }

        function addToCart(id) {
            cart.push(allProducts[id]);
            document.getElementById('cartCountBadge').innerText = cart.length;
            document.getElementById('cartCountBadge').style.display = 'block';
        }

        function toggleCart() {
            const drawer = document.getElementById('cartDrawer');
            drawer.classList.toggle('open');
            document.getElementById('overlay').style.display = drawer.classList.contains('open') ? 'block' : 'none';
            const list = document.getElementById('cartItemsList');
            list.innerHTML = "";
            let total = 0;
            cart.forEach(i => {
                total += parseInt(i.price);
                list.innerHTML += `<div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:5px;"><span>${i.name}</span><b>Rs ${i.price}</b></div>`;
            });
            document.getElementById('cartTotal').innerText = "Rs " + total;
        }

        function viewDetails(id) {
            const p = allProducts[id];
            document.getElementById('modalBody').innerHTML = `
                <img src="${p.img}" style="width:100%; border-radius:15px;">
                <h2>${p.name}</h2>
                <h3 style="color:green;">Rs ${p.price}</h3>
                <p style="margin:15px 0;">${p.features || 'Available at our store.'}</p>
                <button onclick="whatsappMe('${p.name}', '${p.price}')" style="width:100%; padding:15px; background:#25d366; color:white; border:none; border-radius:10px;">Chat on WhatsApp</button>`;
            document.getElementById('productModal').style.display = "block";
        }

        function login() { auth.signInWithRedirect(provider); }
        function openAbout() { document.getElementById('aboutModal').style.display = 'block'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function closeAll() { document.getElementById('cartDrawer').classList.remove('open'); document.getElementById('overlay').style.display = 'none'; }
        function whatsappMe(n, p) { window.open(`https://wa.me/9779816910549?text=I want to buy: ${n} (Rs ${p})`); }
        function checkoutWhatsApp() { let m = cart.map(i => "- " + i.name).join("\n"); window.open(`https://wa.me/9779816910549?text=Order Request:\n${m}`); }
        function setCategoryFilter(cat, el) {
            activeCategory = cat;
            document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
            el.classList.add('active');
            filterProducts();
        }
        function toggleDropdown(e) { e.stopPropagation(); const d = document.getElementById('headerDropdown'); d.style.display = d.style.display === 'flex' ? 'none' : 'flex'; }
        window.onclick = () => document.getElementById('headerDropdown').style.display = 'none';
    </script>
</body>
</html>
